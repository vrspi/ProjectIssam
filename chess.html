<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }

        #board {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-template-rows: repeat(8, 60px);
            border: 2px solid #333;
        }

        .square {
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            cursor: pointer;
            user-select: none;
        }

        .white {
            background-color: #f0d9b5;
        }

        .black {
            background-color: #b58863;
        }

        .highlighted {
            background-color: yellow;
        }

        .possible-move {
            background-color: lightgreen;
        }
    </style>
</head>
<body>
    <div id="board"></div>

    <script>
        const boardDiv = document.getElementById('board');
        let boardState = [
            ['♜', '♞', '♝', '♛', '♚', '♝', '♞', '♜'],
            ['♟', '♟', '♟', '♟', '♟', '♟', '♟', '♟'],
            [null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null],
            ['♙', '♙', '♙', '♙', '♙', '♙', '♙', '♙'],
            ['♖', '♘', '♗', '♕', '♔', '♗', '♘', '♖']
        ];
        let selectedPiece = null;
        let possibleMoves = [];
        let isWhiteTurn = true;

        function drawBoard() {
            boardDiv.innerHTML = '';
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const square = document.createElement('div');
                    square.classList.add('square');
                    square.dataset.row = row;
                    square.dataset.col = col;
                    if ((row + col) % 2 === 0) {
                        square.classList.add('white');
                    } else {
                        square.classList.add('black');
                    }
                    square.textContent = boardState[row][col];
                    square.addEventListener('click', handleSquareClick);
                    boardDiv.appendChild(square);
                }
            }
        }

        function handleSquareClick(event) {
            const row = parseInt(event.target.dataset.row);
            const col = parseInt(event.target.dataset.col);
            const piece = boardState[row][col];

            removeHighlighting();

            if (selectedPiece) {
                const move = possibleMoves.find(m => m[0] === row && m[1] === col);
                if (move) {
                    movePiece(selectedPiece, move);
                    selectedPiece = null;
                    possibleMoves = [];
                    isWhiteTurn = !isWhiteTurn;
                } else {
                    selectedPiece = null;
                    possibleMoves = [];
                    if (piece && isCorrectColor(piece)) {
                        selectPiece(row, col);
                    }
                }
            } else {
                if (piece && isCorrectColor(piece)) {
                    selectPiece(row, col);
                }
            }
        }

        function isCorrectColor(piece) {
            const isWhitePiece = piece === piece.toUpperCase();
            return (isWhiteTurn && isWhitePiece) || (!isWhiteTurn && !isWhitePiece);
        }

        function selectPiece(row, col) {
            selectedPiece = [row, col];
            highlightSquare(row, col);
            possibleMoves = getPossibleMoves(row, col);
            highlightPossibleMoves();
        }

        function highlightSquare(row, col) {
            const square = document.querySelector(`.square[data-row="${row}"][data-col="${col}"]`);
            square.classList.add('highlighted');
        }

        function highlightPossibleMoves() {
            possibleMoves.forEach(move => {
                const square = document.querySelector(`.square[data-row="${move[0]}"][data-col="${move[1]}"]`);
                square.classList.add('possible-move');
            });
        }

        function removeHighlighting() {
            document.querySelectorAll('.highlighted').forEach(square => square.classList.remove('highlighted'));
            document.querySelectorAll('.possible-move').forEach(square => square.classList.remove('possible-move'));
        }

        function movePiece(start, end) {
            boardState[end[0]][end[1]] = boardState[start[0]][start[1]];
            boardState[start[0]][start[1]] = null;
            drawBoard();
        }

        function getPossibleMoves(row, col) {
            const piece = boardState[row][col];
            if (!piece) return [];

            const moves = [];
            const isWhite = piece === piece.toUpperCase();
            const direction = isWhite ? -1 : 1;

            switch (piece.toLowerCase()) {
                case '♙': // Pawn
                    const startRow = isWhite ? 6 : 1;
                    const forwardOne = row + direction;
                    if (isOnBoard(forwardOne, col) && !boardState[forwardOne][col]) {
                        moves.push([forwardOne, col]);
                        const forwardTwo = row + 2 * direction;
                        if (row === startRow && !boardState[forwardTwo][col]) {
                            moves.push([forwardTwo, col]);
                        }
                    }
                    const captureLeft = row + direction;
                    const captureRight = row + direction;
                    if (isOnBoard(captureLeft, col - 1) && boardState[captureLeft][col - 1] && isOppositeColor(piece, boardState[captureLeft][col - 1])) {
                        moves.push([captureLeft, col - 1]);
                    }
                    if (isOnBoard(captureRight, col + 1) && boardState[captureRight][col + 1] && isOppositeColor(piece, boardState[captureRight][col + 1])) {
                        moves.push([captureRight, col + 1]);
                    }
                    break;
                case '♜': // Rook
                    getStraightMoves(row, col, moves);
                    break;
                case '♞': // Knight
                    const knightMoves = [
                        [-2, -1], [-2, 1], [-1, -2], [-1, 2],
                        [1, -2], [1, 2], [2, -1], [2, 1]
                    ];
                    knightMoves.forEach(m => {
                        const newRow = row + m[0];
                        const newCol = col + m[1];
                        if (isOnBoard(newRow, newCol) && (!boardState[newRow][newCol] || isOppositeColor(piece, boardState[newRow][newCol]))) {
                            moves.push([newRow, newCol]);
                        }
                    });
                    break;
                case '♝': // Bishop
                    getDiagonalMoves(row, col, moves);
                    break;
                case '♛': // Queen
                    getStraightMoves(row, col, moves);
                    getDiagonalMoves(row, col, moves);
                    break;
                case '♚': // King
                    const kingMoves = [
                        [-1, -1], [-1, 0], [-1, 1], [0, -1],
                        [0, 1], [1, -1], [1, 0], [1, 1]
                    ];
                    kingMoves.forEach(m => {
                        const newRow = row + m[0];
                        const newCol = col + m[1];
                        if (isOnBoard(newRow, newCol) && (!boardState[newRow][newCol] || isOppositeColor(piece, boardState[newRow][newCol]))) {
                            moves.push([newRow, newCol]);
                        }
                    });
                    break;
            }
            return moves;
        }

        function getStraightMoves(row, col, moves) {
            const directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];
            for (const dir of directions) {
                let currentRow = row + dir[0];
                let currentCol = col + dir[1];
                while (isOnBoard(currentRow, currentCol)) {
                    if (!boardState[currentRow][currentCol]) {
                        moves.push([currentRow, currentCol]);
                    } else {
                        if (isOppositeColor(boardState[row][col], boardState[currentRow][currentCol])) {
                            moves.push([currentRow, currentCol]);
                        }
                        break;
                    }
                    currentRow += dir[0];
                    currentCol += dir[1];
                }
            }
        }

        function getDiagonalMoves(row, col, moves) {
            const directions = [[-1, -1], [-1, 1], [1, -1], [1, 1]];
            for (const dir of directions) {
                let currentRow = row + dir[0];
                let currentCol = col + dir[1];
                while (isOnBoard(currentRow, currentCol)) {
                    if (!boardState[currentRow][currentCol]) {
                        moves.push([currentRow, currentCol]);
                    } else {
                        if (isOppositeColor(boardState[row][col], boardState[currentRow][currentCol])) {
                            moves.push([currentRow, currentCol]);
                        }
                        break;
                    }
                    currentRow += dir[0];
                    currentCol += dir[1];
                }
            }
        }

        function isOnBoard(row, col) {
            return row >= 0 && row < 8 && col >= 0 && col < 8;
        }

        function isOppositeColor(piece1, piece2) {
            const isWhite1 = piece1 === piece1.toUpperCase();
            const isWhite2 = piece2 === piece2.toUpperCase();
            return isWhite1 !== isWhite2;
        }

        drawBoard();
    </script>
</body>
</html>